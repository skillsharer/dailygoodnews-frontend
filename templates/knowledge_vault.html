{% extends "base.html" %}

{% block title %}Knowledge Vault - Daily Good News{% endblock %}

{% block content %}
    <div id="knowledge-main-content" class="container">
        <section class="knowledge-grid">
            {% for knowledge in knowledge_vaults %}
            <article class="knowledge-card">
                <a href="/knowledge_vault/{{ knowledge.slug }}" class="knowledge-card-link">
                    <div class="image-wrapper">
                        {% if knowledge.image %}
                            <img class="knowledge-card-image" src="{{ url_for('artifacts', filename='knowledge_vault/images/' + knowledge.image) }}">
                        {% endif %}
                        <div class="knowledge-card-content">
                            <h3 class="knowledge-card-title">{{ knowledge.heading }}</h3>
                            {% if knowledge.image %}
                            <article class="knowledge-card-description">{{ knowledge.article|sanitize_html|truncate(200)|safe }}</article>
                            {% else %}
                            <article class="knowledge-card-description">{{ knowledge.article|sanitize_html|truncate(600)|safe }}</article>
                            {% endif %}
                            <div class="read-more">Read More</div>
                        </div>
                    </div>
                </a>
            </article>
            {% endfor %}
        </section>
        {% if knowledge_vaults|length > 2 %}
        <div class="view-more-container">
            <button id="view-more-knowledge-btn" class="view-more-btn">
                View More Stories
                <span class="view-more-icon">â†“</span>
            </button>
        </div>
        {% endif %}
    </div>
{% endblock %}