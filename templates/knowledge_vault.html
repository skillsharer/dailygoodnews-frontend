{% extends "base.html" %}

{% block title %}Knowledge Vault - Daily Good News{% endblock %}

{% block content %}
    <div id="knowledge-main-content" class="container">
        <section class="content-grid knowledge-grid" aria-labelledby="knowledge-vault-heading">
            <h2 id="knowledge-vault-heading" class="visually-hidden">Knowledge Vault Articles</h2>
            {% for knowledge in knowledge_vaults %}
            <article class="card knowledge-card" role="article">
                <a href="/knowledge_vault/{{ knowledge.slug }}" class="card-link knowledge-card-link" aria-describedby="knowledge-{{ loop.index0 }}-title">
                    <div class="image-wrapper">
                        {% if knowledge.image %}
                            <img class="card-image knowledge-card-image" src="{{ url_for('artifacts', filename='knowledge_vault/images/' + knowledge.image) }}" alt="{{ knowledge.heading }}">
                        {% endif %}
                        <div class="card-content knowledge-card-content">
                            <h3 id="knowledge-{{ loop.index0 }}-title" class="card-title knowledge-card-title">{{ knowledge.heading }}</h3>
                            {% if knowledge.image %}
                            <div class="card-description knowledge-card-description">{{ knowledge.article|sanitize_html|truncate(200)|safe }}</div>
                            {% else %}
                            <div class="card-description knowledge-card-description">{{ knowledge.article|sanitize_html|truncate(600)|safe }}</div>
                            {% endif %}
                            <div class="read-more" aria-label="Read more about {{ knowledge.heading }}">Read More</div>
                        </div>
                    </div>
                </a>
            </article>
            {% endfor %}
        </section>
        {% if knowledge_vaults|length > 2 %}
        <div class="view-more-container">
            <button id="view-more-knowledge-btn" class="view-more-btn">
                View More Stories
                <span class="view-more-icon">â†“</span>
            </button>
        </div>
        {% endif %}
    </div>
{% endblock %}